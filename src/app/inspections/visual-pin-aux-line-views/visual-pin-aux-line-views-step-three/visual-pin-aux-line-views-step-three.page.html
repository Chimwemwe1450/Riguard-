<ion-header>
    <app-header-inspections></app-header-inspections>
</ion-header>

<div class="header-container fixed-header" slot="fixed">
    <div class="page-heading">
        <app-content-header [heading]="heading" [stepCount]="stepCount" [currentStep]="step">
        </app-content-header>
    </div>
</div>

<ion-content>
    <div class="page-container">
        <div class="top-form-inputs">
            <h5>Step {{step}} - {{stepDescription}}</h5>
            <ion-list>
                <ion-item class="item-item" lines="None">
                    <ion-avatar>
                        <ion-icon name="reader-outline"></ion-icon>
                    </ion-avatar>
                    <ion-label>
                        <b>Reference Procedure</b><br> {{critProcedure.rp}}
                    </ion-label>
                </ion-item>
                <ion-item class="item-item" lines="None">
                    <ion-avatar>
                        <ion-icon name="checkmark-circle-outline"></ion-icon>
                    </ion-avatar>
                    <ion-label>
                        <b>Acceptance Criteria</b><br> {{critProcedure.ac}}
                    </ion-label>
                </ion-item>
            </ion-list>
        </div>

        <form [formGroup]="form">
            <div class="form-inputs">
                <ion-item class="input-field-item"
                          [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_COMPONENT_TRACEBILITY'].invalid}">
                    <ion-label position="stacked">Component/Traceability Serial Number</ion-label>
                    <ion-input formControlName="VIS_FORM_1_COMPONENT_TRACEBILITY" placeholder="type here..."></ion-input>
                </ion-item>
                <ion-item class="input-field-item"
                          [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_PIN_HARDFACING'].invalid}">
                    <ion-label position="stacked">Hardfacing Type</ion-label>
                    <ion-select formControlName="VIS_FORM_1_PIN_HARDFACING" placeholder="Select Seal Area">
                        <ion-select-option value="Collmonoy">Collmonoy</ion-select-option>
                        <ion-select-option value="Stellite">Stellite</ion-select-option>
                        <ion-select-option value="Tungsten Carbide">Tungsten Carbide</ion-select-option>
                        <ion-select-option value="Stainless">Stainless</ion-select-option>
                    </ion-select>
                </ion-item>
            </div>

            <div class="form-inputs-container">
                <ion-label>Lead In</ion-label>
                <div class="form-inputs">
                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_LEAD_IN_MECH_DAM'].invalid}">
                        <ion-label position="stacked">Mechanical Damage</ion-label>
                        <ion-select formControlName="VIS_FORM_1_LEAD_IN_MECH_DAM" placeholder="select Mechanical Damage">
                            <ion-select-option value="No damage">No Damage</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>

                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_LEAD_IN_PITTING'].invalid}">
                        <ion-label position="stacked">Pitting</ion-label>
                        <ion-select formControlName="VIS_FORM_1_LEAD_IN_PITTING" placeholder="select Pitting">
                            <ion-select-option value="No pitting">No Pitting</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>
                </div>
            </div>
            <br>
            <div class="form-inputs-container">
                <ion-label>Hardfacing Condition</ion-label>
                <div class="form-inputs">
                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_PIN_SCORING'].invalid}">
                        <ion-label position="stacked">Scoring</ion-label>
                        <ion-select formControlName="VIS_FORM_1_PIN_SCORING" placeholder="Select Scoring">
                            <ion-select-option value="No scoring">No Scoring</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>

                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_PIN_MECH_DAM'].invalid}">
                        <ion-label position="stacked">Mechanical Damage</ion-label>
                        <ion-select formControlName="VIS_FORM_1_PIN_MECH_DAM" placeholder="Select Galling">
                            <ion-select-option value="No damage">No damage</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>

                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_PIN_GALLING'].invalid}">
                        <ion-label position="stacked">Galling</ion-label>
                        <ion-select formControlName="VIS_FORM_1_PIN_GALLING" placeholder="Select Pitting">
                            <ion-select-option value="No Galling">No Galling</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>

                    <ion-item class="input-field-item"
                              [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_PIN_PITTING'].invalid}">
                        <ion-label position="stacked">Pitting</ion-label>
                        <ion-select formControlName="VIS_FORM_1_PIN_PITTING" placeholder="Select Pitting">
                            <ion-select-option value="No Pitting">No Pitting</ion-select-option>
                            <ion-select-option value="Light">Light</ion-select-option>
                            <ion-select-option value="Moderate">Moderate</ion-select-option>
                            <ion-select-option value="Severe">Severe</ion-select-option>
                        </ion-select>
                    </ion-item>
                </div>

            </div>

            <div class="form-inputs">
                <ion-item class="input-field-item"
                          [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_MINOR_REPAIR'].invalid}">
                    <ion-label position="stacked">Minor Repair</ion-label>
                    <ion-select formControlName="VIS_FORM_1_MINOR_REPAIR" placeholder="Select Minor Repair">
                        <ion-select-option value="Dress and polish complete">Dress and polish complete</ion-select-option>
                        <ion-select-option value="Dress and polish required">Dress and polish required</ion-select-option>
                        <ion-select-option value="None required">No action required</ion-select-option>
                    </ion-select>
                </ion-item>

                <div [ngClass]="{'invalid-input':navigateNext && form.controls['VIS_FORM_1_STATUS'].invalid}">
                  <ion-radio-group formControlName="VIS_FORM_1_STATUS" value="accept">
                    <ion-item>
                        <ion-label>Accept</ion-label>
                        <ion-radio slot="start" value="Acceptable"></ion-radio>
                    </ion-item>
                    <ion-item>
                        <ion-label>Reject</ion-label>
                        <ion-radio slot="start" value="Reject"></ion-radio>
                    </ion-item>
                    <ion-item lines="None">
                        <ion-label>Engineer Review</ion-label>
                        <ion-radio slot="start" value="Engineer_Review"></ion-radio>
                    </ion-item>
                  </ion-radio-group>
                </div>
                <br>
                <ion-item class="input-field-item"
                          [ngClass]="{'ion-invalid ion-touched':navigateNext && form.controls['VIS_FORM_1_NOTES'].invalid}">
                    <ion-label position="stacked">Notes</ion-label>
                    <ion-textarea formControlName="VIS_FORM_1_NOTES" placeholder="type here..." rows="3">
                    </ion-textarea>
                </ion-item>
            </div>
        </form>

    </div>
</ion-content>

<ion-footer>
    <app-footer-visual-pin [currentRoute]="step"
                           [isFirstRoute]="false"
                           [isFinalRoute]="true"
                           [isFormValid]="validForm"
                           validationMessage="Please complete all required fields."
                           (nextClicked)="navigateToNext($event)">
    </app-footer-visual-pin>
</ion-footer>
